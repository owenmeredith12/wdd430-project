{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Owner/Documents/wdd430/wdd430-project/wdd340-project/src/app/dashboard/page.tsx"],"sourcesContent":["// app/dashboard/page.tsx\r\nimport postgres from 'postgres';\r\n\r\n// Connect to your Vercel Postgres\r\nconst sql = postgres(process.env.POSTGRES_URL!, { ssl: 'require' });\r\n\r\nasync function getDashboardData() {\r\n  // Count users\r\n  const usersCount = await sql`SELECT COUNT(*) AS count FROM users`;\r\n  const artisansCount = await sql`SELECT COUNT(*) AS count FROM artisans`;\r\n  const productsCount = await sql`SELECT COUNT(*) AS count FROM products`;\r\n  const reviewsCount = await sql`SELECT COUNT(*) AS count FROM reviews`;\r\n\r\n  // Latest 5 products\r\n  const latestProducts = await sql`\r\n    SELECT p.id, p.name, p.price AS artisan_name\r\n    FROM products p\r\n    JOIN artisans a ON p.artisan_id = a.id\r\n    ORDER BY p.id DESC\r\n    LIMIT 5\r\n  `;\r\n\r\n  // Revenue by month\r\n  const monthlyRevenue = await sql`SELECT * FROM revenue ORDER BY month`;\r\n\r\n  return { usersCount, artisansCount, productsCount, reviewsCount, latestProducts, monthlyRevenue };\r\n}\r\n\r\nexport default async function DashboardPage() {\r\n  const { usersCount, artisansCount, productsCount, reviewsCount, latestProducts, monthlyRevenue } =\r\n    await getDashboardData();\r\n\r\n  return (\r\n    <div className=\"p-8\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">Handcrafted Haven Dashboard</h1>\r\n\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-4 gap-6 mb-8\">\r\n        <div className=\"p-4 bg-white shadow rounded\">\r\n          <h2 className=\"font-semibold\">Users</h2>\r\n          <p className=\"text-2xl\">{usersCount[0].count}</p>\r\n        </div>\r\n        <div className=\"p-4 bg-white shadow rounded\">\r\n          <h2 className=\"font-semibold\">Artisans</h2>\r\n          <p className=\"text-2xl\">{artisansCount[0].count}</p>\r\n        </div>\r\n        <div className=\"p-4 bg-white shadow rounded\">\r\n          <h2 className=\"font-semibold\">Products</h2>\r\n          <p className=\"text-2xl\">{productsCount[0].count}</p>\r\n        </div>\r\n        <div className=\"p-4 bg-white shadow rounded\">\r\n          <h2 className=\"font-semibold\">Reviews</h2>\r\n          <p className=\"text-2xl\">{reviewsCount[0].count}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Latest Products */}\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-xl font-bold mb-2\">Latest Products</h2>\r\n        <table className=\"w-full table-auto border-collapse border border-gray-300\">\r\n          <thead>\r\n            <tr className=\"bg-gray-100\">\r\n              <th className=\"border p-2\">Product</th>\r\n              <th className=\"border p-2\">Artisan</th>\r\n              <th className=\"border p-2\">Price</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {latestProducts.map((p) => (\r\n              <tr key={p.id}>\r\n                <td className=\"border p-2\">{p.name}</td>\r\n                <td className=\"border p-2\">{p.artisan_name}</td>\r\n                <td className=\"border p-2\">${p.price}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Revenue chart (simple table) */}\r\n      <div>\r\n        <h2 className=\"text-xl font-bold mb-2\">Monthly Revenue</h2>\r\n        <table className=\"w-full table-auto border-collapse border border-gray-300\">\r\n          <thead>\r\n            <tr className=\"bg-gray-100\">\r\n              <th className=\"border p-2\">Month</th>\r\n              <th className=\"border p-2\">Revenue</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {monthlyRevenue.map((r) => (\r\n              <tr key={r.month}>\r\n                <td className=\"border p-2\">{r.month}</td>\r\n                <td className=\"border p-2\">${r.revenue}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}