{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Owner/Documents/wdd430/wdd430-project/wdd340-project/src/app/product/update/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport { Button } from \"../../../components/ui/button\";\r\n\r\nexport default function EditProductPage() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const productId = searchParams.get(\"id\");\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  // Fetch existing product data\r\n  useEffect(() => {\r\n    if (!productId) {\r\n      console.error(\"No product ID in URL\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    fetch(`/api/product?id=${productId}`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.product) {\r\n          setName(data.product.name);\r\n          setDescription(data.product.description);\r\n          setPrice(data.product.price.toString());\r\n          setImageUrl(data.product.imageUrl || \"\");\r\n        } else {\r\n          console.error(\"Product not found\");\r\n        }\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Error fetching product:\", err);\r\n        setLoading(false);\r\n      });\r\n  }, [productId]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!productId) return;\r\n\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/product\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: productId, // send the ID for update\r\n          name,\r\n          description,\r\n          price: parseFloat(price),\r\n          image_url: imageUrl,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        alert(\"Product updated successfully!\");\r\n        router.push(\"/account\"); // redirect back to account page\r\n      } else {\r\n        alert(data.error || \"Failed to update product\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Error updating product\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading product...</p>;\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto p-8\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">Edit Product</h1>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Name</label>\r\n          <input\r\n            type=\"text\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            className=\"w-full border rounded px-3 py-2\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Description</label>\r\n          <textarea\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n            className=\"w-full border rounded px-3 py-2\"\r\n            rows={4}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Price</label>\r\n          <input\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={price}\r\n            onChange={(e) => setPrice(e.target.value)}\r\n            className=\"w-full border rounded px-3 py-2\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Image URL</label>\r\n          <input\r\n            type=\"text\"\r\n            value={imageUrl}\r\n            onChange={(e) => setImageUrl(e.target.value)}\r\n            className=\"w-full border rounded px-3 py-2\"\r\n          />\r\n        </div>\r\n\r\n        <Button type=\"submit\" disabled={submitting}>\r\n          {submitting ? \"Updating...\" : \"Update Product\"}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}