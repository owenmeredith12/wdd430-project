{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Owner/Documents/wdd430/wdd430-project/wdd340-project/src/app/api/product/route.ts"],"sourcesContent":["import postgres from \"postgres\";\r\n\r\nconst sql = postgres(process.env.POSTGRES_URL!, { ssl: \"require\" });\r\n\r\nexport async function GET(req: Request) {\r\n  const { searchParams } = new URL(req.url);\r\n  const id = searchParams.get(\"id\");\r\n\r\n  if (!id) {\r\n    return new Response(JSON.stringify({ error: \"Missing id\" }), { status: 400 });\r\n  }\r\n\r\n  try {\r\n    const result = await sql<{ id: string; name: string; description: string; price: number; image_url: string | null }[]>`\r\n      SELECT id, name, description, price, image_url\r\n      FROM products\r\n      WHERE id = ${id}\r\n      LIMIT 1\r\n    `;\r\n\r\n    if (result.length === 0) {\r\n      return new Response(JSON.stringify(null), { status: 404 });\r\n    }\r\n\r\n    const product = result[0];\r\n\r\n    return new Response(\r\n      JSON.stringify({\r\n        id: product.id,\r\n        name: product.name,\r\n        description: product.description,\r\n        price: Number(product.price),\r\n        imageUrl: product.image_url ?? null,\r\n      })\r\n    );\r\n  } catch (err) {\r\n    console.error(err);\r\n    return new Response(JSON.stringify({ error: \"Database error\" }), { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,IAAA,qJAAQ,EAAC,QAAQ,GAAG,CAAC,YAAY,EAAG;IAAE,KAAK;AAAU;AAE1D,eAAe,IAAI,GAAY;IACpC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,KAAK,aAAa,GAAG,CAAC;IAE5B,IAAI,CAAC,IAAI;QACP,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAa,IAAI;YAAE,QAAQ;QAAI;IAC7E;IAEA,IAAI;QACF,MAAM,SAAS,MAAM,GAAiG,CAAC;;;iBAG1G,EAAE,GAAG;;IAElB,CAAC;QAED,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,OAAO;gBAAE,QAAQ;YAAI;QAC1D;QAEA,MAAM,UAAU,MAAM,CAAC,EAAE;QAEzB,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;YACb,IAAI,QAAQ,EAAE;YACd,MAAM,QAAQ,IAAI;YAClB,aAAa,QAAQ,WAAW;YAChC,OAAO,OAAO,QAAQ,KAAK;YAC3B,UAAU,QAAQ,SAAS,IAAI;QACjC;IAEJ,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAiB,IAAI;YAAE,QAAQ;QAAI;IACjF;AACF"}}]
}