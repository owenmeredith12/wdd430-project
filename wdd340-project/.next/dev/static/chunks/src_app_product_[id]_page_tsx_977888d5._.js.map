{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/Owner/Documents/wdd430/wdd430-project/wdd340-project/src/app/product/[id]/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { Button } from \"../../components/ui/button\";\r\n\r\n// Types\r\ntype Product = {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  imageUrl: string;\r\n};\r\n\r\ntype Review = {\r\n  id: string;\r\n  rating: number;\r\n  userName: string;\r\n};\r\n\r\nexport default function ProductPage() {\r\n  const searchParams = useSearchParams();\r\n  const id = searchParams.get(\"id\");\r\n\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [reviews, setReviews] = useState<Review[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [newRating, setNewRating] = useState(5);\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  // Fetch product and reviews\r\n  useEffect(() => {\r\n    if (!id) return;\r\n\r\n    fetch(`/api/product?id=${id}`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.product) {\r\n          setProduct(data.product);\r\n          setReviews(data.reviews || []);\r\n        }\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n        setLoading(false);\r\n      });\r\n  }, [id]);\r\n\r\n  // Add review handler\r\n  const handleAddReview = async () => {\r\n    if (!product) return;\r\n    setSubmitting(true);\r\n\r\n    const userId = \"123\"; // Replace with actual logged-in user ID\r\n\r\n    try {\r\n      const res = await fetch(\"/api/review\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          productId: product.id,\r\n          rating: newRating,\r\n          userId,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (data.review) {\r\n        setReviews([...reviews, { id: data.review.id, rating: newRating, userName: \"You\" }]);\r\n        setNewRating(5); // Reset\r\n      } else if (data.error) {\r\n        alert(data.error);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to add review\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (!product) return <p>Invalid product ID</p>;\r\n\r\nreturn (\r\n  <div className=\"max-w-4xl mx-auto p-8\">\r\n  ...\r\n    {/* Reviews Section */}\r\n    <section className=\"mt-12\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Reviews</h2>\r\n      {reviews.length === 0 ? (\r\n        <p className=\"text-gray-500\">No reviews yet.</p>\r\n      ) : (\r\n        <ul className=\"space-y-4\">\r\n          {reviews.map((rev) => (\r\n            <li key={rev.id} className=\"border p-4 rounded-lg\">\r\n              <p className=\"font-medium\">{rev.userName}</p>\r\n              <p>Rating: {rev.rating} / 5</p>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </section>\r\n\r\n    {/* Add Review Section */}\r\n    <section className=\"mt-8\">\r\n      <h3 className=\"text-xl font-bold mb-2\">Add a Review</h3>\r\n      <div className=\"flex items-center space-x-2 mb-2\">\r\n        <label>Rating:</label>\r\n        <select\r\n          value={newRating}\r\n          onChange={(e) => setNewRating(Number(e.target.value))}\r\n          className=\"border p-1 rounded\"\r\n        >\r\n          {[1, 2, 3, 4, 5].map((n) => (\r\n            <option key={n} value={n}>\r\n              {n}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <button onClick={handleAddReview} disabled={submitting}>\r\n          {submitting ? \"Submitting...\" : \"Add Review\"}\r\n        </button>\r\n      </div>\r\n    </section>\r\n  </div>\r\n);\r\n;\r\n}\r\n"],"names":["useSearchParams","useEffect","useState","Image","Button","Product","id","name","description","price","imageUrl","Review","rating","userName","ProductPage","searchParams","get","product","setProduct","reviews","setReviews","loading","setLoading","newRating","setNewRating","submitting","setSubmitting","fetch","then","res","json","data","catch","err","console","error","handleAddReview","userId","method","headers","body","JSON","stringify","productId","review","alert","length","map","rev","e","Number","target","value","n"],"mappings":"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","ignoreList":[]}}]
}